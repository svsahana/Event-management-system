<!DOCTYPE html>
<html>
<head>
    <title>My Events</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../static/css/styles.css">
    <link rel="stylesheet" href="../static/css/Home.css">
    <link rel="stylesheet" href="../static/css/tables.css">
    <link href='https://fonts.googleapis.com/css?family=Oswald' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../static/css/all.css">
    <link rel="stylesheet" href="../static/css/all.min.css">
	<style>
    body {
      background-image: url('../static/images/img.jpg');
      background-size: cover;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    .topnav {
      display: flex;
      align-items: center;
      gap: 20px;
      padding: 12px;
      background-color: #2729ab;
    }

    .topnav a {
      color: white;
      text-decoration: none;
      padding: 8px 15px;
      font-size: 16px;
    }

    .topnav a:hover,
    .topnav a.active {
      background-color: #2415f36c;
      border-radius: 5px;
    }

    #searchInput {
      padding: 8px;
      margin-left: auto;
      border-radius: 5px;
      border: none;
      width: 300px;
      font-size: 16px;
    }

    .dark-mode {
      background-color: #121212 !important;
      color: white !important;
    }

    .dark-mode .topnav {
      background-color: #222 !important;
    }

    .dark-mode a {
      color: white;
    }
    .dark-toggle {
      cursor: pointer;
      font-size: 20px;
      margin-left: 15px;
    }
  </style>

</head>

<script>
	function inviteUser(id){
		var username = prompt("Enter username of user you want to invite to this event");
		
		xhttp = new XMLHttpRequest();
		var s ="";
		for(var i=1; i<id.length; i++)
			s+=id[i];
		var integer = parseInt(s, 10);
			
		xhttp.open("POST", "http://localhost:8888/Home/Invite", true);
		xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xhttp.send("id=" + integer + "&person=" + username);
			  
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4 && this.responseText!="") {
				alert(this.responseText);
			}
		};
	}
	
	function deleteEvent(id){
		xhttp = new XMLHttpRequest();
		var s ="";
		for(var i=1; i<id.length; i++)
			s+=id[i];
		var integer = parseInt(s, 10);
			
		xhttp.open("GET", "http://localhost:8888/Home/Delete?id=" + integer, true);
		xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xhttp.send();
			  
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4) {
				alert("Deleted!");
				document.getElementById("container").innerHTML =
				this.responseText;
			}
		};
	}
	
	function deleteEvent(id){
		xhttp = new XMLHttpRequest();
		var s ="";
		for(var i=1; i<id.length; i++)
			s+=id[i];
		var integer = parseInt(s, 10);
			
		xhttp.open("GET", "http://localhost:8888/Home/Delete?id=" + integer, true);
		xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xhttp.send();
			  
		xhttp.onreadystatechange = function() {
			if (this.readyState == 4) {
				alert("Deleted!");
				document.getElementById("container").innerHTML =
				this.responseText;
			}
		};
	}
	
	function viewEventDetails(id){
		var s ="";
		for(var i=2; i<id.length; i++)
			s+=id[i];
		var integer = parseInt(s, 10);
			
		var link = document.createElement("a");
		document.body.appendChild(link);
		link.href = "http://localhost:8888/EventDetails?id=" + integer;
		link.click();
		document.body.removeChild(link);
	}
	
	function editEvent(id){
		var s ="";
		for(var i=1; i<id.length; i++)
			s+=id[i];
		var integer = parseInt(s, 10);
			
		var link = document.createElement("a");
		document.body.appendChild(link);
		link.href = "http://localhost:8888/Edit?id=" + integer;
		link.click();
		document.body.removeChild(link);
	}
	function toggleMode() {
      document.body.classList.toggle('dark-mode');
    }
	function filterEvents() {
      let input = document.getElementById('searchInput').value.toLowerCase();
      let cards = document.getElementsByClassName('event-card');

  Array.from(cards).forEach(card => {
     const name = card.querySelector('.event-name')?.textContent.toLowerCase() || "";
     const type = card.querySelector('.event-type')?.textContent.toLowerCase() || "";
     card.style.display = (name.includes(input) || type.includes(input)) ? '' : 'none';
  });
}
</script>

<body style="background-image:url('../static/images/img.jpg')">
    <div class="topnav">
		<a href="#" style="margin-left:25%" class="active">My Events</a>
		<a href="http://localhost:8888/CreateEvent">Create Event</a>
		<a href="http://localhost:8888/InvitedEvents">Invited Events</a>
		<a href="http://localhost:8888/Attending">Attending</a>
        <a href="http://localhost:8888/Home/logout">Log Out</a>
		<input type="text" id="searchInput" placeholder="Search events by name or type" onkeyup="filterEvents()" />
        <span onclick="toggleMode()" class="dark-toggle">🌙</span>
    </div>
    <div>
        
        <div class="container">
               
                <div class="productcontainer" id="container">
                    
                     <!-- content -->
                
                </div>
        </div>
    </div>

</body>
</html>
